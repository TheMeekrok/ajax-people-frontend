<div class="form-layout m-auto">
  <div class="form-layout-inner">
    <h3>üìù –£–∫–∞–∂–∏—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h3>
    <div class="form-container">
      <form class="form" [formGroup]="form">
        <div class="form-fields">

          <mat-form-field appearance="fill">
            <mat-label>–ò–º—è</mat-label>
            <input matInput type="text" formControlName="firstName" placeholder="–ò–≤–∞–Ω" />
            <mat-error *ngIf="firstName?.invalid && (firstName?.dirty || firstName?.touched)">
              {{ firstNameErrorMessage }}
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>–§–∞–º–∏–ª–∏—è</mat-label>
            <input matInput type="text" formControlName="secondName" placeholder="–ò–≤–∞–Ω–æ–≤" />
            <mat-error *ngIf="secondName?.invalid && (secondName?.dirty || secondName?.touched)">
              {{ secondNameErrorMessage }}
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>–í–æ–∑—Ä–∞—Å—Ç</mat-label>
            <input matInput type="text" formControlName="age" placeholder="18" />
            <mat-error *ngIf="age?.invalid && (age?.dirty || age?.touched)">{{ ageErrorMessage }}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>–°—Ç–∞—Ç—É—Å</mat-label>
            <mat-select [(value)]="userStatus" formControlName="userStatus">
              <mat-option value=1>–°—Ç—É–¥–µ–Ω—Ç</mat-option>
              <mat-option value=2>–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å</mat-option>
              <mat-option value=3>–î—Ä—É–≥–æ–µ</mat-option>
            </mat-select>
            <mat-error *ngIf="status?.invalid && (status?.dirty || status?.touched)">{{ statusErrorMessage }}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>–£—Ä–æ–≤–µ–Ω—å –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è</mat-label>
            <mat-select formControlName="educationLevel">
              <mat-option>–ù–µ—Ç</mat-option>
              <mat-option value=1>–ë–∞–∫–∞–ª–∞–≤—Ä–∏–∞—Ç</mat-option>
              <mat-option value=2>–ú–∞–≥–∏—Å—Ç—Ä–∞—Ç—É—Ä–∞</mat-option>
              <mat-option value=3>–°–ø–µ—Ü–∏–∞–ª–∏—Ç–µ—Ç</mat-option>
              <mat-option value=4>–î—Ä—É–≥–æ–µ</mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>–ì–æ–¥ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è</mat-label>
            <input matInput type="text" formControlName="admissionYear" placeholder="2019" />
            <mat-error *ngIf="admissionYear?.invalid 
              && (admissionYear?.dirty || admissionYear?.touched)"
              >
              {{ admissionYearErrorMessage }}
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>–®–∫–æ–ª–∞ (–∏–Ω—Å—Ç–∏—Ç—É—Ç)</mat-label>
            <input type="text" matInput formControlName="school" [matAutocomplete]="autoSchools">
            <mat-autocomplete 
              #autoSchools="matAutocomplete" 
              [displayWith]="displayFunctionSchool"
              >
              <mat-option *ngFor="let school of filteredSchools | async" [value]="school">
                {{ school.title }}
              </mat-option>
            </mat-autocomplete>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏</mat-label>
            <input type="text" matInput formControlName="faculty" [matAutocomplete]="autoFaculties">
            <mat-autocomplete 
              #autoFaculties="matAutocomplete"
              [displayWith]="displayFunctionFaculty" 
            >
              <mat-option *ngFor="let faculty of filteredFaculties | async" [value]="faculty">
                {{ faculty.title }}
              </mat-option>
            </mat-autocomplete>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Telegram</mat-label>
            <input matInput type="text" formControlName="telegram" placeholder="@ivanov2030" />
            <mat-error *ngIf="telegram?.invalid && (telegram?.dirty || telegram?.touched)">
              {{ telegramErrorMessage }}
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>–í–ö–æ–Ω—Ç–∞–∫—Ç–µ</mat-label>
            <input matInput type="text" formControlName="vk" placeholder="vk.com/ivanov2030" />
            <mat-error *ngIf="vk?.invalid && (vk?.dirty || vk?.touched)">
              {{ vkErrorMessage }}
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</mat-label>
            <input matInput type="text" formControlName="phoneNumber" placeholder="+7" />
            <mat-error *ngIf="phoneNumber?.invalid && (phoneNumber?.dirty || phoneNumber?.touched)">
              {{ phoneNumberErrorMessage }}
            </mat-error>
          </mat-form-field>

          <p *ngIf="!isLoading" class="mat-typography text-red-500 text-center text-xs m-0">{{ formErrorMessage }}</p>
          <div *ngIf="isLoading" class="spinner"><mat-spinner></mat-spinner></div>

        </div>

        <button 
          type="submit" 
          mat-raised-button 
          color="primary" 
          [disabled]="form.invalid || isLoading" 
          (click)="onSubmitData()"
        >
          –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
      </form>
    </div>
  </div>
</div>
